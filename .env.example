# NOTA IMPORTANTE:
# Esta configuración usa PostgreSQL (Supabase) para desarrollo y producción.

# Ambiente
NODE_ENV=development

# Base de datos (PostgreSQL / Supabase)
# Formato: postgresql://postgres.[PROJECT-REF]:[YOUR-PASSWORD]@aws-0-us-west-2.pooler.supabase.com:6543/postgres
# IMPORTANTE: Reemplaza [YOUR-PASSWORD] con tu contraseña de base de datos de Supabase
DATABASE_URL=postgresql://postgres.fjxpwckoqpxlnebcjnab:[YOUR-PASSWORD]@aws-0-us-west-2.pooler.supabase.com:6543/postgres?sslmode=require

# Clave de encriptación para certificados y credenciales (32 caracteres aleatorios)
# Generar con: openssl rand -base64 32
ENCRYPTION_KEY=your-32-character-encryption-key-here

# Puerto (opcional, por defecto 5000)
PORT=5000

# Configuración del Ministerio de Hacienda
# MOCK: Simular respuestas (desarrollo)
# REAL: Conectar al servidor real (producción)
MH_MODE=MOCK
MH_API_URL=https://dte.mh.gob.sv/api
MH_API_KEY=your-api-key-here

# Supabase API (opcional, para usar features adicionales)
SUPABASE_URL=https://fjxpwckoqpxlnebcjnab.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key-here

# Contraseña del usuario admin (cambiar en producción)
ADMIN_PASSWORD=admin123

# Redis (rate limiting distribuido, colas BullMQ)
# Opción 1: URL completa (recomendada en proveedores gestionados)
#   REDIS_URL=rediss://default:[PASSWORD]@[HOST]:[PORT]/0
# Opción 2: Parámetros separados
#   REDIS_HOST=[HOST]
#   REDIS_PORT=6380
#   REDIS_USERNAME=default
#   REDIS_PASSWORD=[PASSWORD]
#   REDIS_TLS=true
# Namespace para prefijar claves (multi-entorno/tenant seguro)
REDIS_NAMESPACE=fx

# Sistema de Notificaciones
# SMTP (Email)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@facturaxpress.sv

# Twilio (SMS)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_FROM_NUMBER=+15551234567

# Alertas de Certificados
CERT_ALERT_INTERVAL_MINUTES=60
CERT_RENEWAL_URL=https://facturaxpress.sv/renovar

# Canales por defecto (si no hay configuración en BD)
DEFAULT_ALERT_EMAIL=alertas@facturaxpress.sv
DEFAULT_ALERT_PHONE=+50370000000
DEFAULT_ALERT_WEBHOOK=https://your-webhook-url.com/alerts

# SIEM (opcional, para logs centralizados)
SIEM_WEBHOOK_URL=https://your-siem.com/webhook
SIEM_API_KEY=your-siem-api-key
SIEM_LOG_ERRORS=true

# Sincronización de Esquemas DGII/MH
SCHEMA_SYNC_ENABLED=true
SCHEMA_SYNC_INTERVAL_HOURS=24
SCHEMA_STORAGE_DIR=./server/dgii-resources/versions
MH_SCHEMA_FACTURA_URL=https://dte.mh.gob.sv/schemas/factura-v1.json
MH_SCHEMA_CCF_URL=https://dte.mh.gob.sv/schemas/ccf-v1.json
MH_SCHEMA_NC_URL=https://dte.mh.gob.sv/schemas/nota-credito-v1.json
